package ParteMario;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.SQLException;
import javax.swing.JOptionPane;
public class accionEquipamiento implements ActionListener {
	private latderch drch;
	accionEquipamiento(latderch latderch) throws ClassNotFoundException, SQLException {
		drch = latderch;
	}
	@Override
	public void actionPerformed(ActionEvent e) {
		// TODO Auto-generated method stub
		switch(e.getActionCommand()) {
		case "botonBorrar":
			i.getArea().setText("");
			i.getTxNom().setText("");
		
			break;
		case "botonInsertar":			
			boolean enc = false;
			if(i.getArea().getText().isEmpty() || i.getTxNom().getText().isEmpty()) {
				enc = true;
			}
			if(enc) {
				JOptionPane.showMessageDialog(i, "Porfavor, rellene los campos");
			}
			else {
                try {        	
                	int idE = i.incrementarEquipamiento();
    				int idA = i.incrementarActividad();
    				int idM = i.incrementarMantenimiento();
    				int idMI = i.incrementarMantenimientoTablaMantenimiento();
    				// String nomManten =i.get().getText(); -> METER EL NOMBRE DE LA PERSONA DE MANTENIMIENTO
    				i.getBd().ejecutarSQL2("INSERT INTO equipamiento(id, nombre, descripcion, idactividad, idmantenimiento) VALUES('"+idE+"', '"+i.getTxNom().getText()+"', '"+i.getArea().getText()+"', '"+idA+"', '"+idM+"')");
					//i.getBd().ejecutarSQL2("INSERT INTO mantenimiento(id, nombre) VALUES('"+idMI+"', '"++"')");
                } catch (SQLException e1) {
					e1.printStackTrace();
				}
                JOptionPane.showMessageDialog(i, "Datos insertados correctamente");
			}
			break;
		}
	}
	public latizq getI() {
		return i;
	}
	public void setI(latizq i) {
		this.i = i;
	}
}